[<%= application %>]

; application credentials
user = <%= user %>
group = <%= group %>

; listen on sock
listen = /var/run/php5-fpm-pools-<%= application %>.sock

<% if stage == "development" %>
chdir = /vagrant/public
<% else %>
chdir = <%= deploy_to %>/current/public
<% end %>

; process manager
pm = dynamic
pm.max_children = 5
pm.start_servers = 2
pm.min_spare_servers = 2
pm.max_spare_servers = 5
pm.max_requests = 500

; logging
access.log = /home/<%= user %>/php/log/<%= application %>.access.log
access.format = %R - %u %t "%m %r%Q%q" %s %f %{mili}d %{kilo}M %C%%
slowlog = /home/<%= user %>/php/log/<%= application %>.slow.log

request_slowlog_timeout = 2s

rlimit_files = 32768 ; required

security.limit_extensions = .php

; php.ini overrides
php_admin_value[sendmail_path] = /usr/sbin/sendmail -t -i -f info@vanpattenmedia.com
<% if stage == "production" %>
php_flag[display_errors] = off
<% else %>
php_flag[display_errors] = on
<% end %>
php_admin_flag[log_errors] = on
php_admin_value[error_log] = /home/<%= user %>/php/log/error.log
php_admin_value[memory_limit] = 128M
php_admin_value[session.save_path] = /home/<%= user %>/php/sessions
php_admin_value[session.name] = sess_<%= application %>
php_admin_value[session.hash_function] = sha512
php_admin_value[session.hash_bits_per_character] = 5
